{"ast":null,"code":"import{Button,Drawer,List,message,Typography}from\"antd\";import{useEffect,useState}from\"react\";import{checkout,getCart}from\"../utils\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const{Text}=Typography;const MyCart=()=>{const[cartVisible,setCartVisible]=useState(false);const[cartData,setCartData]=useState();const[loading,setLoading]=useState(false);const[checking,setChecking]=useState(false);// get ths shopping cart data\nuseEffect(()=>{if(!cartVisible){return;}setLoading(true);getCart().then(data=>{setCartData(data);}).catch(err=>{message.error(err.message);}).finally(()=>{setLoading(false);});},[cartVisible]);const onCheckOut=()=>{setChecking(true);checkout().then(()=>{message.success(\"Successfully checkout\");setCartVisible(false);}).catch(err=>{message.error(err.message);}).finally(()=>{setChecking(false);});};const onCloseDrawer=()=>{setCartVisible(false);};const onOpenDrawer=()=>{setCartVisible(true);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{type:\"primary\",shape:\"round\",onClick:onOpenDrawer,children:\"Cart\"}),/*#__PURE__*/_jsx(Drawer,{title:\"Your Favourite\",onClose:onCloseDrawer,open:cartVisible,width:520,footer:/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\"},children:[/*#__PURE__*/_jsx(Text,{strong:true,children:\"Total price: $\".concat(cartData===null||cartData===void 0?void 0:cartData.total_price)}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Button,{onClick:onCloseDrawer,style:{marginRight:8},children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{onClick:onCheckOut,type:\"primary\",loading:checking,disabled:loading||(cartData===null||cartData===void 0?void 0:cartData.order_items.length)===0,children:\"Checkout\"})]})]}),children:/*#__PURE__*/_jsx(List,{loading:loading,itemLayout:\"horizontal\",dataSource:cartData===null||cartData===void 0?void 0:cartData.order_items,renderItem:item=>/*#__PURE__*/_jsx(List.Item,{children:/*#__PURE__*/_jsx(List.Item.Meta,{title:item.menu_item_name,description:\"$\".concat(item.price)})})})})]});};export default MyCart;","map":{"version":3,"names":["Button","Drawer","List","message","Typography","useEffect","useState","checkout","getCart","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Text","MyCart","cartVisible","setCartVisible","cartData","setCartData","loading","setLoading","checking","setChecking","then","data","catch","err","error","finally","onCheckOut","success","onCloseDrawer","onOpenDrawer","children","type","shape","onClick","title","onClose","open","width","footer","style","display","justifyContent","strong","concat","total_price","marginRight","disabled","order_items","length","itemLayout","dataSource","renderItem","item","Item","Meta","menu_item_name","description","price"],"sources":["/Users/yuxuan/Desktop/projects/doordash-app/src/components/MyCart.js"],"sourcesContent":["import { Button, Drawer, List, message, Typography } from \"antd\";\nimport { useEffect, useState } from \"react\";\nimport { checkout, getCart } from \"../utils\";\n\nconst { Text } = Typography;\n\nconst MyCart = () => {\n  const [cartVisible, setCartVisible] = useState(false);\n  const [cartData, setCartData] = useState();\n  const [loading, setLoading] = useState(false);\n  const [checking, setChecking] = useState(false);\n\n  // get ths shopping cart data\n  useEffect(() => {\n    if (!cartVisible) {\n      return;\n    }\n\n    setLoading(true);\n    getCart()\n      .then((data) => {\n        setCartData(data);\n      })\n      .catch((err) => {\n        message.error(err.message);\n      })\n      .finally(() => {\n        setLoading(false);\n      });\n  }, [cartVisible]);\n\n  const onCheckOut = () => {\n    setChecking(true);\n    checkout()\n      .then(() => {\n        message.success(\"Successfully checkout\");\n        setCartVisible(false);\n      })\n      .catch((err) => {\n        message.error(err.message);\n      })\n      .finally(() => {\n        setChecking(false);\n      });\n  };\n\n  const onCloseDrawer = () => {\n    setCartVisible(false);\n  };\n\n  const onOpenDrawer = () => {\n    setCartVisible(true);\n  };\n\n  return (\n    <>\n      <Button type=\"primary\" shape=\"round\" onClick={onOpenDrawer}>\n        Cart\n      </Button>\n      <Drawer\n        title=\"Your Favourite\"\n        onClose={onCloseDrawer}\n        open={cartVisible}\n        width={520}\n        footer={\n          <div\n            style={{\n              display: \"flex\",\n              justifyContent: \"space-between\",\n            }}\n          >\n            <Text\n              strong={true}\n            >{`Total price: $${cartData?.total_price}`}</Text>\n            <div>\n              <Button onClick={onCloseDrawer} style={{ marginRight: 8 }}>\n                Cancel\n              </Button>\n              <Button\n                onClick={onCheckOut}\n                type=\"primary\"\n                loading={checking}\n                disabled={loading || cartData?.order_items.length === 0}\n              >\n                Checkout\n              </Button>\n            </div>\n          </div>\n        }\n      >\n        <List\n          loading={loading}\n          itemLayout=\"horizontal\"\n          dataSource={cartData?.order_items}\n          renderItem={(item) => (\n            <List.Item>\n              <List.Item.Meta\n                title={item.menu_item_name}\n                description={`$${item.price}`}\n              />\n            </List.Item>\n          )}\n        />\n      </Drawer>\n    </>\n  );\n};\n\nexport default MyCart;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}